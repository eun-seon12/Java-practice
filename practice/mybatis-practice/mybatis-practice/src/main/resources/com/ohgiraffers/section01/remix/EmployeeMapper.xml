<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ohgiraffers.section01.remix.EmployeeMapper">
    <resultMap id="employeeResultMap" type="com.ohgiraffers.section01.remix.EmployeeDTO">
        <id property="id" column="EMP_ID"/>
        <result property="name" column="EMP_NAME"/>
        <result property="no" column="EMP_NO"/>
        <result property="email" column="EMAIL"/>
        <result property="phone" column="PHONE"/>
        <result property="deptCode" column="DEPT_CODE"/>
        <result property="jobCode" column="JOB_CODE"/>
        <result property="salLevel" column="SAL_LEVEL"/>
        <result property="salary" column="SALARY"/>
        <result property="bonus" column="BONUS"/>
        <result property="managerId" column="MANAGER_ID"/>
        <result property="hireDate" column="HIRE_DATE"/>
        <result property="entDate" column="ENT_DATE"/>
        <result property="entYn" column="ENT_YN"/>
    </resultMap>

    <select id="selectAllEmployee" resultMap="employeeResultMap">
        select
               emp_id,
               emp_name,
               emp_no,
               email,
               phone,
               dept_code,
               job_code,
               sal_level,
               salary,
               bonus,
               manager_id,
               hire_date,
               ent_date,
               ent_yn
          from employee
         where ent_yn='y'
         order by emp_id
    </select>
    <select id="selectEmployeeById" parameterType="_int" resultMap="employeeResultMap">
        select*from employee
        where ent_yn = 'y'
        and emp_id = #{ id }
    </select>

    <insert id="registEmployee" parameterType="com.ohgiraffers.section01.remix.EmployeeDTO">
        insert into employee
        (
        emp_name,
        phone,
        dept_code,
        job_code
        )
        values
        (
        #{ name },
        #{ phone },
        #{ deptCode },
        #{ jobCode }
        )
    </insert>
    <update id="updateEmployee" parameterType="com.ohgiraffers.section01.remix.EmployeeDTO">
        update employee
        set dept_code = #{ deptCode }
        , job_code = #{ jobCode }
        where emp_id = #{ id }
    </update>
</mapper>